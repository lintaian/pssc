<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>登陆</title>
	<script src="js/lib/jquery.js"></script>
</head>
<body >
	<canvas id="canvas" width="500px" height="500px" style="border: 1px solid red"></canvas>
	<button>上传</button>
	<script>
	 	var canvas = document.getElementById('canvas');
		var context = canvas.getContext('2d');
		var img = new Image();
		img.src = "photo/boy.jpg";
		img.onload = function() {
			context.drawImage(img, 0, 0, 500, 500);
		} 
		context.fillStyle = "rgb(250,0,0)";
		context.strokeStyle = "rgb(0,0,0)";
		//把图像保存到新的窗口
		var x = 0, y = 0;
		$(function() {
			$('#canvas').on('touchstart', function(e){
				context.moveTo(e.originalEvent.targetTouches[0].pageX, e.originalEvent.targetTouches[0].pageY);
			})
			$('#canvas').on('touchmove', function(e){
				context.lineTo(e.originalEvent.targetTouches[0].pageX, e.originalEvent.targetTouches[0].pageY);
				context.stroke();
			})
			$('#canvas').on('touchend', function(e){
			})
			$('button').on('click', function() {
				$.ajax({
					url: 'upload/draw',
					type: 'post',
					data: JSON.stringify({
						data: canvas.toDataURL("image/png")
					}),
					dataType: 'json',
					success: function(data) {
						
					}
				});
			});
		})
		
	</script>
</body>
</html>